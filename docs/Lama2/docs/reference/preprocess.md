<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# preprocess

```go
import "github.com/HexmosTech/lama2/preprocess"
```

Package preprocess provides facilities to expand environment variables in \`.l2\` API files and return the contents

## Index

- [func Expand(s string, vm *goja.Runtime, mapping map[string]string) string](<#func-expand>)
- [func ExpandEnv(s string, vm *goja.Runtime) string](<#func-expandenv>)
- [func ExpandHeaders(block *gabs.Container, vm *goja.Runtime)](<#func-expandheaders>)
- [func ExpandJSON(block *gabs.Container, vm *goja.Runtime)](<#func-expandjson>)
- [func ExpandURL(block *gabs.Container, vm *goja.Runtime)](<#func-expandurl>)
- [func GetL2EnvVariables(dir string) (map[string]map[string]interface{}, error)](<#func-getl2envvariables>)
- [func GetLamaFileAsString(path string) string](<#func-getlamafileasstring>)
- [func LamaFile(inputFile string) (string, string)](<#func-lamafile>)
- [func LoadEnvFile(l2path string)](<#func-loadenvfile>)
- [func LoadEnvironments(dir string)](<#func-loadenvironments>)
- [func ProcessVarsInBlock(block *gabs.Container, vm *goja.Runtime)](<#func-processvarsinblock>)
- [func SearchL2ConfigEnv(dir string) (string, error)](<#func-searchl2configenv>)


## func [Expand](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/expandvar.go#L20>)

```go
func Expand(s string, vm *goja.Runtime, mapping map[string]string) string
```

Expand replaces $\{var\} or $var in the string based on the mapping function. For example, os.ExpandEnv\(s\) is equivalent to os.Expand\(s, os.Getenv\).

## func [ExpandEnv](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/expandvar.go#L80>)

```go
func ExpandEnv(s string, vm *goja.Runtime) string
```

ExpandEnv replaces $\{var\} or $var in the string according to the values of the current environment variables. References to undefined variables are replaced by the empty string.

## func [ExpandHeaders](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L29>)

```go
func ExpandHeaders(block *gabs.Container, vm *goja.Runtime)
```

## func [ExpandJSON](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L81>)

```go
func ExpandJSON(block *gabs.Container, vm *goja.Runtime)
```

## func [ExpandURL](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L49>)

```go
func ExpandURL(block *gabs.Container, vm *goja.Runtime)
```

## func [GetL2EnvVariables](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L169>)

```go
func GetL2EnvVariables(dir string) (map[string]map[string]interface{}, error)
```

## func [GetLamaFileAsString](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L196>)

```go
func GetLamaFileAsString(path string) string
```

## func [LamaFile](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L210>)

```go
func LamaFile(inputFile string) (string, string)
```

LamaFile takes in a path to an API file. It moves into the API file directory, reads the API contents, loads the \`l2.env\` file if available, and finally substitutes environment vars in the API contents Once done, it reverts back to the original directory, and returns the processed l2 file.

## func [LoadEnvFile](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L115>)

```go
func LoadEnvFile(l2path string)
```

## func [LoadEnvironments](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L123>)

```go
func LoadEnvironments(dir string)
```

## func [ProcessVarsInBlock](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L23>)

```go
func ProcessVarsInBlock(block *gabs.Container, vm *goja.Runtime)
```

## func [SearchL2ConfigEnv](<https://github.com/HexmosTech/Lama2/blob/master/preprocess/preprocess.go#L102>)

```go
func SearchL2ConfigEnv(dir string) (string, error)
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
